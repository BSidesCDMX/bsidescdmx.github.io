<header class="site-header" role="banner">

  <div class="wrapper">
    {% assign default_paths = site.pages | map: "path" %}
    {% assign page_paths = site.header_pages | default: default_paths %}
    <a class="site-title" href="{{ "/" | relative_url }}">{{ site.title | escape }}</a>
  
    {% if page_paths %}
      <nav class="site-nav">
        <div class="trigger">
          {% for menu in site.t[page.lang] %}
            <a class="page-link" href="{{ menu[1].url }}">{{ menu[1].name }}</a>
          {% endfor %}

          <!-- Languages menu -->
          {% assign posts=site.posts | where:"ref", page.ref | sort: 'lang' %}
          {% for post in posts %} 
            <a href="{{ post.url | prepend: site.baseurl }}" class="{{ post.lang }}">{{ post.lang }}</a>
          {% endfor %}

          {% assign pages=site.pages | where:"ref", page.ref | sort: 'lang' %}
          {% for page in pages %} 
            <a href="{{ page.url | prepend: site.baseurl }}" class="{{ page.lang }}">{{ page.lang }}</a>
          {% endfor %}

        <!-- Previous solution based on navigation weight (requires navigation_weight: number on each page.md) 

        <div class="trigger">
          {% assign pages=site.pages | where:"lang", page.lang | sort: 'navigation_weight' %}
          {% for my_page in pages %}
            {% if page.navigation_weight %}
              {% if page.title %}
                <a class="page-link" href="{{ page.url | relative_url }}">{{ page.title | escape }}</a>
              {% endif %}
            {% endif %}
          {% endfor %} 
        </div> -->
        </div>
        </div>
      </nav>
    {% endif %}
  </div>

</header>